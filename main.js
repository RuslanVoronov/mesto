(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var r=function(){function t(e,r){var o,i,u,c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,u=function(){c._inputList=Array.from(c._formElement.querySelectorAll(c._input)),c._buttonElement=c._formElement.querySelector(c._submitButton),c._toggleButtonState(),c._inputList.forEach((function(t){t.addEventListener("input",(function(){c._toggleInputErrorState(t),c._toggleButtonState()}))}))},(i=n(i="_setEventListeners"))in o?Object.defineProperty(o,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[i]=u,this._input=e.input,this._submitButton=e.submitButton,this._inActiveButton=e.inActiveButton,this._inputError=e.inputError,this._errorClass=e.errorClass,this._formElement=r}var r,o;return r=t,(o=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_toggleInputErrorState",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){this._formElement.querySelector("#".concat(t.id,"-error")).textContent=t.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._errorClass),e.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inActiveButton),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inActiveButton),this._buttonElement.disabled=!1)}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function u(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===o(e)?e:String(e)}var a=function(){function t(e,n,r,o,i,c,a){var l=this,s=n.handleDeleteIconClick,f=r.handleAddLike,p=o.handleRemoveLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"_addLike",(function(){l._handleAddLike(l._data._id),l._buttonLike.classList.add("like__button_active"),l._likes.push({_id:l._userId}),l._counter.textContent=parseInt(l._counter.textContent)+1})),u(this,"_deleteLike",(function(){l._handleRemoveLike(l._data._id),l._buttonLike.classList.remove("like__button_active"),l._likes=l._likes.filter((function(t){return t._id!=l._userId})),l._counter.textContent=parseInt(l._counter.textContent)-1})),u(this,"deleteCard",(function(){l._element.remove(l._data._id),l._element=null})),u(this,"_checkLike",(function(){return l._likes.some((function(t){return t._id===l._userId}))})),u(this,"_toggleLikeButton",(function(){l._checkLike()?l._deleteLike():l._addLike()})),u(this,"_setEventListeners",(function(){l._buttonLike.addEventListener("click",(function(t){return l._toggleLikeButton(t)})),l._ownerId===l._userId?l._buttonDelete.addEventListener("click",(function(){return l._handleDeleteIconClick(l._data._id,l)})):l._buttonDelete.style.visibility="hidden",l._checkLike()&&l._buttonLike.classList.toggle("like__button_active"),l._cardImage.addEventListener("click",(function(){return l._openImagePopup(l._name,l._link)}))})),u(this,"render",(function(){return l._element=l._getElement(),l._buttonLike=l._element.querySelector(".like__button"),l._buttonDelete=l._element.querySelector(".element__trash-button"),l._cardImage=l._element.querySelector(".element__image"),l._counter=l._element.querySelector(".like__counter"),l._element.querySelector(".element__title").textContent=l._name,l._cardImage.src=l._link,l._cardImage.alt=l._name,l._counter.textContent=l._data.likes.length,l._setEventListeners(),l._element})),this._name=c.name,this._link=c.link,this._template=a,this._openImagePopup=e,this._handleAddLike=f,this._handleRemoveLike=p,this._questionPopupBtn=document.querySelector("#question-btn"),this._data=c,this._userId=i,this._ownerId=c.owner._id,this._handleDeleteIconClick=s,this._likes=this._data.likes}var e,n;return e=t,(n=[{key:"_getElement",value:function(){return document.querySelector(this._template).content.querySelector(".element").cloneNode(!0)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;this._renderedItems=t,this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"setItem",value:function(t){this._container.prepend(t)}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupCloseButton=this._popup.querySelector(".popup__close-button"),this._popupCloseButton.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("mousedown",(function(e){e.target===e.currentTarget&&t.close()}))}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=_(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(this,arguments)}function _(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function S(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(r);if(o){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return S(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t)).popupTitle=e._popup.querySelector(".image-popup__name"),e.popupImage=e._popup.querySelector(".image-popup__image"),e}return e=u,(n=[{key:"open",value:function(t,e){this.popupImage.src=e,this.popupTitle.textContent=t,this.popupImage.alt=t,h(g(u.prototype),"open",this).call(this)}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(b);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setAvatar",value:function(t){t&&(this._avatar.src=t.avatar)}},{key:"setUserInfo",value:function(t){t.name&&(this._data=t,this._name.textContent=t.name,this._job.textContent=t.about)}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function L(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=q(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function R(t,e,n){return(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t){var e=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===O(e)?e:String(e)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(r){var o=T(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return L(this,t)});function i(t,e){var n,r,u,c=e.callbackFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),R(C(u=o.call(this,t)),"_getInputValues",(function(){return u._inputList.forEach((function(t){u._formValues[t.name]=t.value})),u._formValues})),R(C(u),"close",(function(){I((n=C(u),T(i.prototype)),"close",n).call(n),u._popupForm.reset()})),R(C(u),"setEventListeners",(function(){I((r=C(u),T(i.prototype)),"setEventListeners",r).call(r),u._popupForm.addEventListener("submit",(function(t){t.preventDefault(),u._callbackFormSubmit(u._getInputValues())}))})),R(C(u),"submitStatus",(function(t){u._submitButton.textContent=t})),u._callbackFormSubmit=c,u._popupForm=u._popup.querySelector(".popup__form"),u._inputList=u._popupForm.querySelectorAll(".popup__input"),u._submitButton=u._popupForm.querySelector(".popup__save-button"),u._formValues={},u}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(b);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}var D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_checkServer",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkServer)}},{key:"updateUserInfo",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(this._checkServer)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._checkServer)}},{key:"addNewCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.place,link:t.link})}).then(this._checkServer)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._checkServer)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkServer)}},{key:"addLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkServer)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkServer)}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function N(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return J(t)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=H(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},G.apply(this,arguments)}function H(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function M(t,e,n){return(e=K(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t){var e=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===V(e)?e:String(e)}var Q,W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(n);if(r){var o=z(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return N(this,t)});function i(t,e){var n,r,u=e.callbackSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),M(J(r=o.call(this,t)),"setEventListeners",(function(t,e){G((n=J(r),z(i.prototype)),"setEventListeners",n).call(n),r._submitButton.addEventListener("click",(function(){r._callbackSubmit(t,e)}))})),M(J(r),"submitStatus",(function(t){r._submitButton.textContent=t})),r._popup=document.querySelector(t),r._submitButton=r._popup.querySelector("#question-btn"),r._callbackSubmit=u,r}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(b),X={form:".popup__form",input:".popup__input",submitButton:".popup__save-button",inActiveButton:"popup__save-button_invalid",inputError:"popup__error",errorClass:"popup__input_error_visible"},Y=document.querySelector("#profile-form"),Z=document.querySelector("#card-form"),$=document.querySelector("#avatar-form"),tt=document.querySelector(".popup__input_type_name"),et=document.querySelector(".popup__input_type_job"),nt=document.querySelector(".profile__avatar-overlay"),rt=document.querySelector(".profile-info__edit-button"),ot=document.querySelector(".profile__add-button"),it=new D({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"8e75bdf3-a6dd-493a-8736-dd4d2d269086","Content-Type":"application/json"}});Promise.all([it.getUserInfo(),it.getInitialCards()]).then((function(t){Q=t[0]._id,at.setAvatar(t[0]),at.setUserInfo(t[0]),ut.renderItems(t[1])})).catch((function(t){console.log("Ошибка: ".concat(t))}));var ut=new f({renderer:function(t){ut.setItem(ct(t))}},".elements");function ct(t){var e=new a(lt,{handleDeleteIconClick:function(t,e){st.open(),st.setEventListeners(t,e)}},{handleAddLike:function(t){it.addLike(t).then((function(t){e.handleLikeCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))}))}},{handleRemoveLike:function(t){it.deleteLike(t).then((function(e){t.handleLikeCard(e)})).catch((function(t){console.log("Ошибка: ".concat(t))}))}},Q,t,".template");return e.render()}var at=new j({nameSelector:".profile-info__title",jobSelector:".profile-info__subtitle",avatarSelector:".profile__avatar-image"}),lt=function(t,e){ft.open(t,e)},st=new W("#question-popup",{callbackSubmit:function(t,e){st.submitStatus("Удаление..."),it.deleteCard(t).then((function(t){st.close(),e.deleteCard(t)})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){st.submitStatus("Да")}))}}),ft=new k("#image-popup");ft.setEventListeners();var pt=new x("#card-popup",{callbackFormSubmit:function(t){pt.submitStatus("Сохранение..."),it.addNewCard(t).then((function(t){ut.setItem(ct(t)),pt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){pt.submitStatus("Сохранить")}))}});pt.setEventListeners();var yt=new x("#avatar-popup",{callbackFormSubmit:function(t){yt.submitStatus("Сохранение..."),it.updateAvatar(t).then((function(t){at.setAvatar(t),yt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){yt.submitStatus("Сохранить")}))}});yt.setEventListeners();var bt=new x("#profile-popup",{callbackFormSubmit:function(t){bt.submitStatus("Сохранение..."),it.updateUserInfo(t).then((function(t){at.setUserInfo(t),bt.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){bt.submitStatus("Сохранить")}))}});bt.setEventListeners();var mt=new r(X,Y);mt.enableValidation();var dt=new r(X,Z);dt.enableValidation();var ht=new r(X,$);ht.enableValidation(),rt.addEventListener("click",(function(){bt.open();var t=at.getUserInfo();tt.value=t.name,et.value=t.job,mt.resetValidation()})),nt.addEventListener("click",(function(){yt.open(),ht.resetValidation()})),ot.addEventListener("click",(function(){pt.open(),dt.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTdEMsTUFBUWlGLEVBQVN4RixJQUMxQm1GLEdBQW9CTSxpQkFDeEIsSUF1R0EzQyxHQUFjdEosaUJBQWlCLFNBbkgvQixXQUNJdUwsR0FBa0JaLE9BQ2xCb0IsR0FBbUJFLGlCQUN2QixJQWlIQXpDLEdBQWN4SixpQkFBaUIsU0FoRy9CLFdBQ0lxTCxHQUFhVixPQUNibUIsR0FBaUJHLGlCQUNyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dCA9IGRhdGEuaW5wdXQ7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gZGF0YS5zdWJtaXRCdXR0b247XHJcbiAgICAgICAgdGhpcy5faW5BY3RpdmVCdXR0b24gPSBkYXRhLmluQWN0aXZlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3IgPSBkYXRhLmlucHV0RXJyb3I7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGRhdGEuZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0KSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0RXJyb3JTdGF0ZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUlucHV0RXJyb3JTdGF0ZShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vINCf0L7QutCw0LfQsNGC0Ywg0L/QvtC70LUg0L7RiNC40LHQutC4XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH07XHJcbiAgICAvLyDQodC60YDRi9GC0Ywg0L/QvtC70LUg0L7RiNC40LHQutC4XHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuICAgIC8vICDQn9GA0L7QstC10YDQutCwINC40L3Qv9GD0YLQsCDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8g0J/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0LrQvdC+0L/QutC4XHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbkFjdGl2ZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbkFjdGl2ZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3Iob3BlbkltYWdlUG9wdXAsIHsgaGFuZGxlRGVsZXRlSWNvbkNsaWNrIH0sIHsgaGFuZGxlQWRkTGlrZSB9LCB7IGhhbmRsZVJlbW92ZUxpa2UgfSwgdXNlcklkLCBkYXRhLCB0ZW1wbGF0ZUNhcmQpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhcmQ7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlUG9wdXAgPSBvcGVuSW1hZ2VQb3B1cDtcclxuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlID0gaGFuZGxlUmVtb3ZlTGlrZTtcclxuICAgICAgICB0aGlzLl9xdWVzdGlvblBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1ZXN0aW9uLWJ0bicpO1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbkNsaWNrID0gaGFuZGxlRGVsZXRlSWNvbkNsaWNrXHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSB0aGlzLl9kYXRhLmxpa2VzO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRFbGVtZW50KCkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudENhcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZExpa2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQWRkTGlrZSh0aGlzLl9kYXRhLl9pZClcclxuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2xpa2VfX2J1dHRvbl9hY3RpdmUnKTtcclxuICAgICAgICB0aGlzLl9saWtlcy5wdXNoKHsgX2lkOiB0aGlzLl91c2VySWQgfSlcclxuICAgICAgICB0aGlzLl9jb3VudGVyLnRleHRDb250ZW50ID0gcGFyc2VJbnQodGhpcy5fY291bnRlci50ZXh0Q29udGVudCkgKyAxXHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUxpa2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzLl9kYXRhLl9pZClcclxuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoJ2xpa2VfX2J1dHRvbl9hY3RpdmUnKTtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2xpa2VzLmZpbHRlcih4ID0+IHguX2lkICE9IHRoaXMuX3VzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5fY291bnRlci50ZXh0Q29udGVudCA9IHBhcnNlSW50KHRoaXMuX2NvdW50ZXIudGV4dENvbnRlbnQpIC0gMVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUodGhpcy5fZGF0YS5faWQpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0xpa2UgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoeCA9PiB4Ll9pZCA9PT0gdGhpcy5fdXNlcklkKVxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9jaGVja0xpa2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGVMaWtlKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRMaWtlKClcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5fY3VycmVudFVzZXJJZCA9PT0gdGhpcy5fbXlJZClcclxuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKGV2ZW50KSlcclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVJY29uQ2xpY2sodGhpcy5fZGF0YS5faWQsIHRoaXMpKTtcclxuXHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQndC1INC80L7QuSBJRCcpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fY2hlY2tMaWtlKCkpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnbGlrZV9fYnV0dG9uX2FjdGl2ZScpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9vcGVuSW1hZ2VQb3B1cCh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmxpa2VfX2J1dHRvbicpO1xyXG5cclxuICAgICAgICB0aGlzLl9idXR0b25EZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaC1idXR0b24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9jb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubGlrZV9fY291bnRlcicpXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVySXRlbXMoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtcyA9PiB0aGlzLl9yZW5kZXJlcihpdGVtcykpO1xyXG4gICAgfVxyXG4gICAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLnBvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtcG9wdXBfX25hbWUnKTtcclxuICAgICAgICB0aGlzLnBvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtcG9wdXBfX2ltYWdlJyk7XHJcbiAgICB9XHJcbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLnBvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLnBvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX2pvYi50ZXh0Q29udGVudFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldEF2YXRhcihsaW5rKSB7XHJcbiAgICAgICAgaWYgKGxpbmspIHtcclxuICAgICAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGxpbmsuYXZhdGFyO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEubmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBjYWxsYmFja0Zvcm1TdWJtaXQgfSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrRm9ybVN1Ym1pdCA9IGNhbGxiYWNrRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0SXRlbS5uYW1lXSA9IGlucHV0SXRlbS52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICAgIH07XHJcblxyXG4gICAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdFN0YXR1cyA9ICh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tTZXJ2ZXIocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1NlcnZlcilcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXIpXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXIpXHJcbiAgICB9XHJcbiAgICBhZGROZXdDYXJkKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnBsYWNlLFxyXG4gICAgICAgICAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXIpXHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1NlcnZlcilcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1NlcnZlcilcclxuICAgIH1cclxuXHJcbiAgICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrU2VydmVyKVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXIpXHJcbiAgICB9XHJcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGNhbGxiYWNrU3VibWl0IH0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcjcXVlc3Rpb24tYnRuJylcclxuICAgICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdCA9IGNhbGxiYWNrU3VibWl0O1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoY2FyZElkLCBjYXJkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdChjYXJkSWQsIGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgc3VibWl0U3RhdHVzID0gKHRleHQpID0+IHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCBGb3JtVmFsaWRhdGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uJztcclxuXHJcbmNvbnN0IHNldHRpbmcgPSB7XHJcbiAgICBmb3JtOiAnLnBvcHVwX19mb3JtJyxcclxuICAgIGlucHV0OiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b246ICcucG9wdXBfX3NhdmUtYnV0dG9uJyxcclxuICAgIGluQWN0aXZlQnV0dG9uOiAncG9wdXBfX3NhdmUtYnV0dG9uX2ludmFsaWQnLFxyXG4gICAgaW5wdXRFcnJvcjogJ3BvcHVwX19lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X2Vycm9yX3Zpc2libGUnXHJcbn07XHJcblxyXG4vLyDQpNC+0YDQvNGLXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZm9ybScpO1xyXG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWZvcm0nKTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXItZm9ybScpO1xyXG5cclxuLy8gSW5wdXRzXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2pvYicpO1xyXG5cclxuLy8gUHJvZmlsZSBwb3B1cFxyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5JylcclxuY29uc3QgcG9wdXBFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtaW5mb19fZWRpdC1idXR0b24nKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcblxyXG4vLyBhcGlcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01NScsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzhlNzViZGYzLWE2ZGQtNDkzYS04NzM2LWRkNGQyZDI2OTA4NicsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG5Qcm9taXNlLmFsbChbXHJcbiAgICBhcGkuZ2V0VXNlckluZm8oKSxcclxuICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKVxyXG5dKVxyXG4gICAgLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgdXNlcklkID0gdmFsdWVbMF0uX2lkO1xyXG4gICAgICAgIHByb2ZpbGVJbmZvLnNldEF2YXRhcih2YWx1ZVswXSlcclxuICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh2YWx1ZVswXSlcclxuICAgICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyh2YWx1ZVsxXSlcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgfSk7XHJcblxyXG4vLyDRgNC10L3QtNC10YAg0LrQsNGA0YLQvtGH0LXQulxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNhcmRMaXN0LnNldEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgICB9XHJcbn0sICcuZWxlbWVudHMnKTtcclxuXHJcbi8vINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQob3BlbkltYWdlUG9wdXAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVJY29uQ2xpY2s6IChjYXJkSWQsIGNhcmRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKGNhcmRJZCwgY2FyZEVsZW1lbnQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGFuZGxlQWRkTGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50LmhhbmRsZUxpa2VDYXJkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGFuZGxlUmVtb3ZlTGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRJZC5oYW5kbGVMaWtlQ2FyZChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdXNlcklkLCBpdGVtLCAnLnRlbXBsYXRlJyk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQucmVuZGVyKCk7XHJcbn1cclxuXHJcbi8vINGB0LHQvtGAINC40L3RhNC+0YDQvNCw0YbQuNC4XHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlLWluZm9fX3RpdGxlJyxcclxuICAgIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGUtaW5mb19fc3VidGl0bGUnLFxyXG4gICAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyLWltYWdlJ1xyXG59KTtcclxuXHJcbi8vINCe0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuZnVuY3Rpb24gb3BlbkF2YXRhclBvcHVwKCkge1xyXG4gICAgcHJvZmlsZUVkaXRBdmF0YXIub3BlbigpXHJcbiAgICBhdmF0YXJGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn07XHJcblxyXG4vLyDQntGC0LrRgNGL0YLQuNC1INCf0YDQvtGE0LjQu9GMINCf0L7Qv9Cw0L/QsFxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZVBvcHVwKCkge1xyXG4gICAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKClcclxuICAgIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XHJcbiAgICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmpvYjtcclxuICAgIHByb2ZpbGVGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn07XHJcblxyXG4vLyDQntGC0LrRgNGL0YLQuNC1IEltYWdlIFBvcHVwXHJcbmNvbnN0IG9wZW5JbWFnZVBvcHVwID0gKG5hbWUsIGxpbmspID0+IHtcclxuICAgIHBvcHVwSW1hZ2VMYXJnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59O1xyXG5cclxuLy8g0J7RgtC60YDRi9GC0LjQtSDQmtCw0YDQtCDQv9C+0L/QsNC/XHJcbmZ1bmN0aW9uIG9wZW5DYXJkUG9wdXAoKSB7XHJcbiAgICBjYXJkQWRkUG9wdXAub3BlbigpO1xyXG4gICAgY2FyZEZvcm1WYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcclxufTtcclxuXHJcbi8vINCt0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0LTQu9GPINC/0L7Qv9Cw0L/QsCDRgSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtSDRg9C00LDQu9C10L3QuNGPXHJcbmNvbnN0IHBvcHVwV2l0aENvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJyNxdWVzdGlvbi1wb3B1cCcsIHtcclxuICAgIGNhbGxiYWNrU3VibWl0OiAoY2FyZElkLCBjYXJkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5zdWJtaXRTdGF0dXMoJ9Cj0LTQsNC70LXQvdC40LUuLi4nKVxyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXJkRWxlbWVudC5kZWxldGVDYXJkKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLnN1Ym1pdFN0YXR1cygn0JTQsCcpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8g0K3QutC30LXQvNC70L/Rj9GAINC60LvQsNGB0YHQsCDQtNC70Y8g0LHQvtC70YzRiNC+0Lkg0LrQsNGA0YLQuNC90LrQuFxyXG5jb25zdCBwb3B1cEltYWdlTGFyZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNpbWFnZS1wb3B1cCcpO1xyXG5wb3B1cEltYWdlTGFyZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINCt0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgY2FyZEFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNjYXJkLXBvcHVwJywge1xyXG4gICAgY2FsbGJhY2tGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRBZGRQb3B1cC5zdWJtaXRTdGF0dXMoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJylcclxuICAgICAgICBhcGkuYWRkTmV3Q2FyZChkYXRhKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5zZXRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XHJcbiAgICAgICAgICAgICAgICBjYXJkQWRkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkQWRkUG9wdXAuc3VibWl0U3RhdHVzKCfQodC+0YXRgNCw0L3QuNGC0YwnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG59KTtcclxuY2FyZEFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQrdC60LfQtdC80L/Qu9GP0YAg0LTQu9GPINGA0LXQtNCw0LrRgtGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNhdmF0YXItcG9wdXAnLCB7XHJcbiAgICBjYWxsYmFja0Zvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZUVkaXRBdmF0YXIuc3VibWl0U3RhdHVzKCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgICAgICAgYXBpLnVwZGF0ZUF2YXRhcihkYXRhKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlSW5mby5zZXRBdmF0YXIocmVzKTtcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVFZGl0QXZhdGFyLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvZmlsZUVkaXRBdmF0YXIuc3VibWl0U3RhdHVzKCfQodC+0YXRgNCw0L3QuNGC0YwnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG59KVxyXG5wcm9maWxlRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0K3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNwcm9maWxlLXBvcHVwJywge1xyXG4gICAgY2FsbGJhY2tGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVFZGl0UG9wdXAuc3VibWl0U3RhdHVzKCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgICAgICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGRhdGEpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVFZGl0UG9wdXAuc3VibWl0U3RhdHVzKCfQodC+0YXRgNCw0L3QuNGC0YwnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG59KTtcclxucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRlKHNldHRpbmcsIHByb2ZpbGVGb3JtKVxyXG5wcm9maWxlRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdGUoc2V0dGluZywgY2FyZEZvcm0pO1xyXG5jYXJkRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0ZShzZXR0aW5nLCBhdmF0YXJGb3JtKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vINCh0LvRg9GI0LDRgtC10LvQuFxyXG5wb3B1cEVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUHJvZmlsZVBvcHVwKTtcclxucHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5BdmF0YXJQb3B1cCk7XHJcbmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQ2FyZFBvcHVwKTsiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImRhdGEiLCJmb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJfZm9ybUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUlucHV0RXJyb3JTdGF0ZSIsInRoaXMiLCJpbnB1dCIsInN1Ym1pdEJ1dHRvbiIsIl9pbkFjdGl2ZUJ1dHRvbiIsImluQWN0aXZlQnV0dG9uIiwiX2lucHV0RXJyb3IiLCJpbnB1dEVycm9yIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsImVycm9yRWxlbWVudCIsInJlbW92ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJDYXJkIiwib3BlbkltYWdlUG9wdXAiLCJ1c2VySWQiLCJ0ZW1wbGF0ZUNhcmQiLCJoYW5kbGVEZWxldGVJY29uQ2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsIl9oYW5kbGVBZGRMaWtlIiwiX2RhdGEiLCJfaWQiLCJfYnV0dG9uTGlrZSIsIl9saWtlcyIsInB1c2giLCJfdXNlcklkIiwiX2NvdW50ZXIiLCJwYXJzZUludCIsIl9oYW5kbGVSZW1vdmVMaWtlIiwiZmlsdGVyIiwieCIsIl9lbGVtZW50IiwiX2NoZWNrTGlrZSIsIl9kZWxldGVMaWtlIiwiX2FkZExpa2UiLCJldmVudCIsIl90b2dnbGVMaWtlQnV0dG9uIiwiX293bmVySWQiLCJfYnV0dG9uRGVsZXRlIiwiX2hhbmRsZURlbGV0ZUljb25DbGljayIsInN0eWxlIiwidmlzaWJpbGl0eSIsInRvZ2dsZSIsIl9jYXJkSW1hZ2UiLCJfb3BlbkltYWdlUG9wdXAiLCJfbmFtZSIsIl9saW5rIiwiX2dldEVsZW1lbnQiLCJzcmMiLCJhbHQiLCJsaWtlcyIsImxlbmd0aCIsIm5hbWUiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX3F1ZXN0aW9uUG9wdXBCdG4iLCJkb2N1bWVudCIsIm93bmVyIiwiY29udGVudCIsImNsb25lTm9kZSIsIlNlY3Rpb24iLCJzZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9yZW5kZXJlZEl0ZW1zIiwiaXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwVGl0bGUiLCJwb3B1cEltYWdlIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2pvYiIsIl9hdmF0YXIiLCJqb2IiLCJhdmF0YXIiLCJhYm91dCIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja0Zvcm1TdWJtaXQiLCJpbnB1dEl0ZW0iLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwiX3BvcHVwRm9ybSIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJfY2FsbGJhY2tGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwidGV4dCIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrU2VydmVyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwbGFjZSIsImNhcmRJZCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhbGxiYWNrU3VibWl0IiwiY2FyZEVsZW1lbnQiLCJfY2FsbGJhY2tTdWJtaXQiLCJzZXR0aW5nIiwiZm9ybSIsInByb2ZpbGVGb3JtIiwiY2FyZEZvcm0iLCJhdmF0YXJGb3JtIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwcm9maWxlQXZhdGFyIiwicG9wdXBFZGl0QnV0dG9uIiwiY2FyZEFkZEJ1dHRvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInByb2ZpbGVJbmZvIiwic2V0QXZhdGFyIiwic2V0VXNlckluZm8iLCJjYXJkTGlzdCIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaXRlbSIsInNldEl0ZW0iLCJjcmVhdGVDYXJkIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkTGlrZSIsImhhbmRsZUxpa2VDYXJkIiwiZGVsZXRlTGlrZSIsInJlbmRlciIsInBvcHVwSW1hZ2VMYXJnZSIsInN1Ym1pdFN0YXR1cyIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5IiwiY2FyZEFkZFBvcHVwIiwiYWRkTmV3Q2FyZCIsInByb2ZpbGVFZGl0QXZhdGFyIiwidXBkYXRlQXZhdGFyIiwicHJvZmlsZUVkaXRQb3B1cCIsInVwZGF0ZVVzZXJJbmZvIiwicHJvZmlsZUZvcm1WYWxpZGF0ZSIsIkZvcm1WYWxpZGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkRm9ybVZhbGlkYXRlIiwiYXZhdGFyRm9ybVZhbGlkYXRlIiwidXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9